package gnat2xml;

import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

import java.net.URISyntaxException;
import java.nio.file.Paths;

public class Gnat2XmlRunnerTests {

    @Test
    public void Test_Successful_Conversion_To_Xml() throws URISyntaxException {
        var adaFile = Paths.get(Gnat2XmlRunnerTests.class.getClassLoader().getResource("SomeClass.ads").toURI()).toFile();
        var result = Gnat2XmlRunner.ConvertAdaCodeToXml(adaFile);
        Assertions.assertEquals("<?xml version=\"1.0\" encoding=\"UTF-8\" ?><compilation_unit unit_kind=\"A_Package\" unit_class=\"A_Public_Declaration\" unit_origin=\"An_Application_Unit\" unit_full_name=\"SomeClass\" def_name=\"SomeClass\" source_file=\"someclass.ads\">   <sloc line=\"1\" col=\"1\" endline=\"23\" endcol=\"14\"/>   <context_clause_elements_ql>   </context_clause_elements_ql>   <unit_declaration_q>      <package_declaration>         <sloc line=\"1\" col=\"1\" endline=\"23\" endcol=\"14\"/>         <names_ql>            <defining_identifier def_name=\"SomeClass\" def=\"ada://package/SomeClass-1:9\" type=\"null\">               <sloc line=\"1\" col=\"9\" endline=\"1\" endcol=\"17\"/>            </defining_identifier>         </names_ql>         <aspect_specifications_ql>         </aspect_specifications_ql>         <visible_part_declarative_items_ql>            <ordinary_type_declaration>               <sloc line=\"3\" col=\"4\" endline=\"5\" endcol=\"14\"/>               <names_ql>                  <defining_identifier def_name=\"SomeClass\" def=\"ada://ordinary_type/SomeClass-1:9/SomeClass-3:9\" type=\"null\">                     <sloc line=\"3\" col=\"9\" endline=\"3\" endcol=\"17\"/>                  </defining_identifier>               </names_ql>               <discriminant_part_q>                  <not_an_element>                     <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                  </not_an_element>               </discriminant_part_q>               <type_declaration_view_q>                  <record_type_definition>                     <sloc line=\"3\" col=\"22\" endline=\"5\" endcol=\"13\"/>                     <has_abstract_q>                        <not_an_element>                           <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                        </not_an_element>                     </has_abstract_q>                     <has_limited_q>                        <not_an_element>                           <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                        </not_an_element>                     </has_limited_q>                     <record_definition_q>                        <record_definition>                           <sloc line=\"3\" col=\"22\" endline=\"5\" endcol=\"13\"/>                           <has_limited_q>                              <not_an_element>                                 <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                              </not_an_element>                           </has_limited_q>                           <record_components_ql>                              <component_declaration>                                 <sloc line=\"4\" col=\"7\" endline=\"4\" endcol=\"35\"/>                                 <names_ql>                                    <defining_identifier def_name=\"someAttribute\" def=\"ada://component/SomeClass-1:9/SomeClass-3:9/someAttribute-4:7\" type=\"null\">                                       <sloc line=\"4\" col=\"7\" endline=\"4\" endcol=\"19\"/>                                    </defining_identifier>                                 </names_ql>                                 <has_aliased_q>                                    <not_an_element>                                       <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                                    </not_an_element>                                 </has_aliased_q>                                 <object_declaration_view_q>                                    <component_definition>                                       <sloc line=\"4\" col=\"23\" endline=\"4\" endcol=\"29\"/>                                       <has_aliased_q>                                          <not_an_element>                                             <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                                          </not_an_element>                                       </has_aliased_q>                                       <component_definition_view_q>                                          <subtype_indication>                                             <sloc line=\"4\" col=\"23\" endline=\"4\" endcol=\"29\"/>                                             <has_aliased_q>                                                <not_an_element>                                                   <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                                                </not_an_element>                                             </has_aliased_q>                                             <has_null_exclusion_q>                                                <not_an_element>                                                   <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                                                </not_an_element>                                             </has_null_exclusion_q>                                             <subtype_mark_q>                                                <identifier ref_name=\"Integer\" ref=\"ada://ordinary_type/Standard-1:1/Integer-1:1\" type=\"null\">                                                   <sloc line=\"4\" col=\"23\" endline=\"4\" endcol=\"29\"/>                                                </identifier>                                             </subtype_mark_q>                                             <subtype_constraint_q>                                                <not_an_element>                                                   <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                                                </not_an_element>                                             </subtype_constraint_q>                                          </subtype_indication>                                       </component_definition_view_q>                                    </component_definition>                                 </object_declaration_view_q>                                 <initialization_expression_q>                                    <integer_literal type=\"universal integer\" lit_val=\"1\">                                       <sloc line=\"4\" col=\"34\" endline=\"4\" endcol=\"34\"/>                                    </integer_literal>                                 </initialization_expression_q>                                 <aspect_specifications_ql>                                 </aspect_specifications_ql>                              </component_declaration>                           </record_components_ql>                        </record_definition>                     </record_definition_q>                  </record_type_definition>               </type_declaration_view_q>               <aspect_specifications_ql>               </aspect_specifications_ql>            </ordinary_type_declaration>            <ordinary_type_declaration>               <sloc line=\"7\" col=\"4\" endline=\"9\" endcol=\"14\"/>               <names_ql>                  <defining_identifier def_name=\"SomeClass2\" def=\"ada://ordinary_type/SomeClass-1:9/SomeClass2-7:9\" type=\"null\">                     <sloc line=\"7\" col=\"9\" endline=\"7\" endcol=\"18\"/>                  </defining_identifier>               </names_ql>               <discriminant_part_q>                  <not_an_element>                     <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                  </not_an_element>               </discriminant_part_q>               <type_declaration_view_q>                  <tagged_record_type_definition>                     <sloc line=\"7\" col=\"23\" endline=\"9\" endcol=\"13\"/>                     <has_abstract_q>                        <not_an_element>                           <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                        </not_an_element>                     </has_abstract_q>                     <has_limited_q>                        <not_an_element>                           <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                        </not_an_element>                     </has_limited_q>                     <record_definition_q>                        <record_definition>                           <sloc line=\"7\" col=\"30\" endline=\"9\" endcol=\"13\"/>                           <has_limited_q>                              <not_an_element>                                 <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                              </not_an_element>                           </has_limited_q>                           <record_components_ql>                              <component_declaration>                                 <sloc line=\"8\" col=\"7\" endline=\"8\" endcol=\"36\"/>                                 <names_ql>                                    <defining_identifier def_name=\"someAttribute2\" def=\"ada://component/SomeClass-1:9/SomeClass2-7:9/someAttribute2-8:7\" type=\"null\">                                       <sloc line=\"8\" col=\"7\" endline=\"8\" endcol=\"20\"/>                                    </defining_identifier>                                 </names_ql>                                 <has_aliased_q>                                    <not_an_element>                                       <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                                    </not_an_element>                                 </has_aliased_q>                                 <object_declaration_view_q>                                    <component_definition>                                       <sloc line=\"8\" col=\"24\" endline=\"8\" endcol=\"30\"/>                                       <has_aliased_q>                                          <not_an_element>                                             <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                                          </not_an_element>                                       </has_aliased_q>                                       <component_definition_view_q>                                          <subtype_indication>                                             <sloc line=\"8\" col=\"24\" endline=\"8\" endcol=\"30\"/>                                             <has_aliased_q>                                                <not_an_element>                                                   <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                                                </not_an_element>                                             </has_aliased_q>                                             <has_null_exclusion_q>                                                <not_an_element>                                                   <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                                                </not_an_element>                                             </has_null_exclusion_q>                                             <subtype_mark_q>                                                <identifier ref_name=\"Integer\" ref=\"ada://ordinary_type/Standard-1:1/Integer-1:1\" type=\"null\">                                                   <sloc line=\"8\" col=\"24\" endline=\"8\" endcol=\"30\"/>                                                </identifier>                                             </subtype_mark_q>                                             <subtype_constraint_q>                                                <not_an_element>                                                   <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                                                </not_an_element>                                             </subtype_constraint_q>                                          </subtype_indication>                                       </component_definition_view_q>                                    </component_definition>                                 </object_declaration_view_q>                                 <initialization_expression_q>                                    <integer_literal type=\"universal integer\" lit_val=\"2\">                                       <sloc line=\"8\" col=\"35\" endline=\"8\" endcol=\"35\"/>                                    </integer_literal>                                 </initialization_expression_q>                                 <aspect_specifications_ql>                                 </aspect_specifications_ql>                              </component_declaration>                           </record_components_ql>                        </record_definition>                     </record_definition_q>                  </tagged_record_type_definition>               </type_declaration_view_q>               <aspect_specifications_ql>               </aspect_specifications_ql>            </ordinary_type_declaration>            <ordinary_type_declaration>               <sloc line=\"11\" col=\"4\" endline=\"13\" endcol=\"14\"/>               <names_ql>                  <defining_identifier def_name=\"SomeClass3\" def=\"ada://ordinary_type/SomeClass-1:9/SomeClass3-11:9\" type=\"null\">                     <sloc line=\"11\" col=\"9\" endline=\"11\" endcol=\"18\"/>                  </defining_identifier>               </names_ql>               <discriminant_part_q>                  <not_an_element>                     <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                  </not_an_element>               </discriminant_part_q>               <type_declaration_view_q>                  <record_type_definition>                     <sloc line=\"11\" col=\"23\" endline=\"13\" endcol=\"13\"/>                     <has_abstract_q>                        <not_an_element>                           <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                        </not_an_element>                     </has_abstract_q>                     <has_limited_q>                        <not_an_element>                           <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                        </not_an_element>                     </has_limited_q>                     <record_definition_q>                        <record_definition>                           <sloc line=\"11\" col=\"23\" endline=\"13\" endcol=\"13\"/>                           <has_limited_q>                              <not_an_element>                                 <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                              </not_an_element>                           </has_limited_q>                           <record_components_ql>                              <component_declaration>                                 <sloc line=\"12\" col=\"7\" endline=\"12\" endcol=\"36\"/>                                 <names_ql>                                    <defining_identifier def_name=\"someAttribute3\" def=\"ada://component/SomeClass-1:9/SomeClass3-11:9/someAttribute3-12:7\" type=\"null\">                                       <sloc line=\"12\" col=\"7\" endline=\"12\" endcol=\"20\"/>                                    </defining_identifier>                                 </names_ql>                                 <has_aliased_q>                                    <not_an_element>                                       <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                                    </not_an_element>                                 </has_aliased_q>                                 <object_declaration_view_q>                                    <component_definition>                                       <sloc line=\"12\" col=\"24\" endline=\"12\" endcol=\"30\"/>                                       <has_aliased_q>                                          <not_an_element>                                             <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                                          </not_an_element>                                       </has_aliased_q>                                       <component_definition_view_q>                                          <subtype_indication>                                             <sloc line=\"12\" col=\"24\" endline=\"12\" endcol=\"30\"/>                                             <has_aliased_q>                                                <not_an_element>                                                   <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                                                </not_an_element>                                             </has_aliased_q>                                             <has_null_exclusion_q>                                                <not_an_element>                                                   <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                                                </not_an_element>                                             </has_null_exclusion_q>                                             <subtype_mark_q>                                                <identifier ref_name=\"Integer\" ref=\"ada://ordinary_type/Standard-1:1/Integer-1:1\" type=\"null\">                                                   <sloc line=\"12\" col=\"24\" endline=\"12\" endcol=\"30\"/>                                                </identifier>                                             </subtype_mark_q>                                             <subtype_constraint_q>                                                <not_an_element>                                                   <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                                                </not_an_element>                                             </subtype_constraint_q>                                          </subtype_indication>                                       </component_definition_view_q>                                    </component_definition>                                 </object_declaration_view_q>                                 <initialization_expression_q>                                    <integer_literal type=\"universal integer\" lit_val=\"3\">                                       <sloc line=\"12\" col=\"35\" endline=\"12\" endcol=\"35\"/>                                    </integer_literal>                                 </initialization_expression_q>                                 <aspect_specifications_ql>                                 </aspect_specifications_ql>                              </component_declaration>                           </record_components_ql>                        </record_definition>                     </record_definition_q>                  </record_type_definition>               </type_declaration_view_q>               <aspect_specifications_ql>               </aspect_specifications_ql>            </ordinary_type_declaration>            <variable_declaration>               <sloc line=\"15\" col=\"4\" endline=\"15\" endcol=\"32\"/>               <names_ql>                  <defining_identifier def_name=\"rogueVariable\" def=\"ada://variable/SomeClass-1:9/rogueVariable-15:4\" type=\"ada://ordinary_type/Standard-1:1/Integer-1:1\">                     <sloc line=\"15\" col=\"4\" endline=\"15\" endcol=\"16\"/>                  </defining_identifier>               </names_ql>               <has_aliased_q>                  <not_an_element>                     <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                  </not_an_element>               </has_aliased_q>               <object_declaration_view_q>                  <subtype_indication>                     <sloc line=\"15\" col=\"20\" endline=\"15\" endcol=\"26\"/>                     <has_aliased_q>                        <not_an_element>                           <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                        </not_an_element>                     </has_aliased_q>                     <has_null_exclusion_q>                        <not_an_element>                           <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                        </not_an_element>                     </has_null_exclusion_q>                     <subtype_mark_q>                        <identifier ref_name=\"Integer\" ref=\"ada://ordinary_type/Standard-1:1/Integer-1:1\" type=\"null\">                           <sloc line=\"15\" col=\"20\" endline=\"15\" endcol=\"26\"/>                        </identifier>                     </subtype_mark_q>                     <subtype_constraint_q>                        <not_an_element>                           <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                        </not_an_element>                     </subtype_constraint_q>                  </subtype_indication>               </object_declaration_view_q>               <initialization_expression_q>                  <integer_literal type=\"universal integer\" lit_val=\"4\">                     <sloc line=\"15\" col=\"31\" endline=\"15\" endcol=\"31\"/>                  </integer_literal>               </initialization_expression_q>               <aspect_specifications_ql>               </aspect_specifications_ql>            </variable_declaration>            <function_declaration>               <sloc line=\"17\" col=\"4\" endline=\"17\" endcol=\"62\"/>               <is_overriding_declaration_q>                  <not_an_element>                     <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                  </not_an_element>               </is_overriding_declaration_q>               <is_not_overriding_declaration_q>                  <not_an_element>                     <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                  </not_an_element>               </is_not_overriding_declaration_q>               <names_ql>                  <defining_identifier def_name=\"someFunction\" def=\"ada://function/SomeClass-1:9/someFunction-17:13\" type=\"null\">                     <sloc line=\"17\" col=\"13\" endline=\"17\" endcol=\"24\"/>                  </defining_identifier>               </names_ql>               <parameter_profile_ql>                  <parameter_specification mode=\"AN_IN_MODE\">                     <sloc line=\"17\" col=\"27\" endline=\"17\" endcol=\"45\"/>                     <names_ql>                        <defining_identifier def_name=\"Self\" def=\"ada://parameter/SomeClass-1:9/someFunction-17:13/Self-17:27\" type=\"null\">                           <sloc line=\"17\" col=\"27\" endline=\"17\" endcol=\"30\"/>                        </defining_identifier>                     </names_ql>                     <has_aliased_q>                        <not_an_element>                           <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                        </not_an_element>                     </has_aliased_q>                     <has_null_exclusion_q>                        <not_an_element>                           <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                        </not_an_element>                     </has_null_exclusion_q>                     <object_declaration_view_q>                        <identifier ref_name=\"SomeClass\" ref=\"ada://ordinary_type/SomeClass-1:9/SomeClass-3:9\" type=\"null\">                           <sloc line=\"17\" col=\"37\" endline=\"17\" endcol=\"45\"/>                        </identifier>                     </object_declaration_view_q>                     <initialization_expression_q>                        <not_an_element>                           <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                        </not_an_element>                     </initialization_expression_q>                  </parameter_specification>               </parameter_profile_ql>               <is_not_null_return_q>                  <not_an_element>                     <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                  </not_an_element>               </is_not_null_return_q>               <result_profile_q>                  <identifier ref_name=\"Integer\" ref=\"ada://ordinary_type/Standard-1:1/Integer-1:1\" type=\"null\">                     <sloc line=\"17\" col=\"55\" endline=\"17\" endcol=\"61\"/>                  </identifier>               </result_profile_q>               <has_abstract_q>                  <not_an_element>                     <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                  </not_an_element>               </has_abstract_q>               <aspect_specifications_ql>               </aspect_specifications_ql>            </function_declaration>            <procedure_declaration>               <sloc line=\"19\" col=\"4\" endline=\"19\" endcol=\"49\"/>               <is_overriding_declaration_q>                  <not_an_element>                     <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                  </not_an_element>               </is_overriding_declaration_q>               <is_not_overriding_declaration_q>                  <not_an_element>                     <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                  </not_an_element>               </is_not_overriding_declaration_q>               <names_ql>                  <defining_identifier def_name=\"someProcedure\" def=\"ada://procedure/SomeClass-1:9/someProcedure-19:14\" type=\"null\">                     <sloc line=\"19\" col=\"14\" endline=\"19\" endcol=\"26\"/>                  </defining_identifier>               </names_ql>               <parameter_profile_ql>                  <parameter_specification mode=\"AN_IN_MODE\">                     <sloc line=\"19\" col=\"29\" endline=\"19\" endcol=\"47\"/>                     <names_ql>                        <defining_identifier def_name=\"Self\" def=\"ada://parameter/SomeClass-1:9/someProcedure-19:14/Self-19:29\" type=\"null\">                           <sloc line=\"19\" col=\"29\" endline=\"19\" endcol=\"32\"/>                        </defining_identifier>                     </names_ql>                     <has_aliased_q>                        <not_an_element>                           <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                        </not_an_element>                     </has_aliased_q>                     <has_null_exclusion_q>                        <not_an_element>                           <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                        </not_an_element>                     </has_null_exclusion_q>                     <object_declaration_view_q>                        <identifier ref_name=\"SomeClass\" ref=\"ada://ordinary_type/SomeClass-1:9/SomeClass-3:9\" type=\"null\">                           <sloc line=\"19\" col=\"39\" endline=\"19\" endcol=\"47\"/>                        </identifier>                     </object_declaration_view_q>                     <initialization_expression_q>                        <not_an_element>                           <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                        </not_an_element>                     </initialization_expression_q>                  </parameter_specification>               </parameter_profile_ql>               <has_abstract_q>                  <not_an_element>                     <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                  </not_an_element>               </has_abstract_q>               <aspect_specifications_ql>               </aspect_specifications_ql>            </procedure_declaration>            <procedure_declaration>               <sloc line=\"21\" col=\"4\" endline=\"21\" endcol=\"36\"/>               <is_overriding_declaration_q>                  <not_an_element>                     <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                  </not_an_element>               </is_overriding_declaration_q>               <is_not_overriding_declaration_q>                  <not_an_element>                     <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                  </not_an_element>               </is_not_overriding_declaration_q>               <names_ql>                  <defining_identifier def_name=\"someUnrelatedProcedure\" def=\"ada://procedure/SomeClass-1:9/someUnrelatedProcedure-21:14\" type=\"null\">                     <sloc line=\"21\" col=\"14\" endline=\"21\" endcol=\"35\"/>                  </defining_identifier>               </names_ql>               <parameter_profile_ql>               </parameter_profile_ql>               <has_abstract_q>                  <not_an_element>                     <sloc line=\"1\" col=\"1\" endline=\"0\" endcol=\"0\"/>                  </not_an_element>               </has_abstract_q>               <aspect_specifications_ql>               </aspect_specifications_ql>            </procedure_declaration>         </visible_part_declarative_items_ql>         <private_part_declarative_items_ql>         </private_part_declarative_items_ql>      </package_declaration>   </unit_declaration_q>   <pragmas_after_ql>   </pragmas_after_ql></compilation_unit>",result);
    }

}
